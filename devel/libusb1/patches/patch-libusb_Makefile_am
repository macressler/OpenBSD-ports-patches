--- libusb/Makefile.am.orig	Sat Sep 24 16:28:54 2011
+++ libusb/Makefile.am	Sat Sep 24 16:29:57 2011
@@ -2,8 +2,9 @@
 
 LINUX_USBFS_SRC = os/linux_usbfs.h os/linux_usbfs.c
 DARWIN_USB_SRC = os/darwin_usb.h os/darwin_usb.c
+OPENBSD_USB_SRC = os/openbsd_ugen.c
 
-EXTRA_DIST = $(LINUX_USBFS_SRC) $(DARWIN_USB_SRC)
+EXTRA_DIST = $(LINUX_USBFS_SRC) $(DARWIN_USB_SRC) $(OPENBSD_USB_SRC)
 
 if OS_LINUX
 OS_SRC = $(LINUX_USBFS_SRC)
@@ -12,6 +13,10 @@
 if OS_DARWIN
 OS_SRC = $(DARWIN_USB_SRC)
 AM_CFLAGS_EXT = -no-cpp-precomp
+endif
+
+if OS_OPENBSD
+OS_SRC = $(OPENBSD_USB_SRC)
 endif
 
 libusb_1_0_la_CFLAGS = $(VISIBILITY_CFLAGS) $(AM_CFLAGS) -pthread
