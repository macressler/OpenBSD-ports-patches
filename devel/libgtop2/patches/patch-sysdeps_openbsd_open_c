$OpenBSD: patch-sysdeps_openbsd_open_c,v 1.1 2013/12/09 14:26:56 robert Exp $
--- sysdeps/openbsd/open.c.orig	Mon Dec  9 15:04:02 2013
+++ sysdeps/openbsd/open.c	Mon Dec  9 15:04:36 2013
@@ -55,6 +55,7 @@ glibtop_open_p (glibtop *server, const char *program_n
 		const unsigned long features,
 		const unsigned flags)
 {
+	char errbuf[_POSIX2_LINE_MAX];
 #ifdef DEBUG
 	fprintf (stderr, "DEBUG (%d): glibtop_open_p ()\n", getpid ());
 #endif
@@ -69,7 +70,7 @@ glibtop_open_p (glibtop *server, const char *program_n
 	server->os_version_code = OpenBSD;
 
 	/* Setup machine-specific data */
-	server->machine.kd = kvm_open (NULL, NULL, NULL, O_RDONLY, "kvm_open");
+	server->machine.kd = kvm_openfiles (NULL, NULL, NULL, O_RDONLY, errbuf);
 
 	if (server->machine.kd == NULL)
 		glibtop_error_io_r (server, "kvm_open");
