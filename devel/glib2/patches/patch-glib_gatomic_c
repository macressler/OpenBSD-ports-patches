$OpenBSD: patch-glib_gatomic_c,v 1.4 2013/04/08 12:18:12 ajacoutot Exp $

From 690d6b97f83149770ef2aa4477c1cb28159678c2 Mon Sep 17 00:00:00 2001
From: James Turner <james@calminferno.net>
Date: Fri, 05 Apr 2013 19:29:55 +0000
Subject: g_atomic_int_get, g_atomic_pointer_get: accept const arguments

--- glib/gatomic.c.orig	Thu Apr  4 21:57:27 2013
+++ glib/gatomic.c	Thu Apr  4 21:34:39 2013
@@ -682,7 +682,7 @@ gsize
 static pthread_mutex_t g_atomic_lock = PTHREAD_MUTEX_INITIALIZER;
 
 gint
-(g_atomic_int_get) (volatile gint *atomic)
+(g_atomic_int_get) (const volatile gint *atomic)
 {
   gint value;
 
@@ -797,9 +797,9 @@ guint
 
 
 gpointer
-(g_atomic_pointer_get) (volatile void *atomic)
+(g_atomic_pointer_get) (const volatile void *atomic)
 {
-  volatile gpointer *ptr = atomic;
+  const volatile gpointer *ptr = atomic;
   gpointer value;
 
   pthread_mutex_lock (&g_atomic_lock);
