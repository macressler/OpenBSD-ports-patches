$OpenBSD: patch-src_client_side_c,v 1.1 2013/01/02 11:21:13 sthen Exp $

fix a leak with malformed headers: 1.754.2.30 upstream, extracted from
http://www.squid-cache.org/Versions/v2/2.7/squid-2.7.STABLE9-20110824.diff

--- src/client_side.c.orig	Wed Jan  2 10:15:50 2013
+++ src/client_side.c	Wed Jan  2 10:16:07 2013
@@ -3063,6 +3063,7 @@ clientCheckHeaderDone(clientHttpRequest * http)
     if (mb.size > 0) {
 	comm_write_mbuf(http->conn->fd, mb, clientWriteComplete, http);
     } else {
+	memBufClean(&mb);
 	storeClientCopy(http->sc, http->entry,
 	    http->out.offset,
 	    http->out.offset,
