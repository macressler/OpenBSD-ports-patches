$OpenBSD: patch-net_base_dnsrr_resolver_cc,v 1.6 2011/12/14 16:58:19 robert Exp $
--- net/base/dnsrr_resolver.cc.orig	Wed Dec  7 09:01:30 2011
+++ net/base/dnsrr_resolver.cc	Tue Dec 13 21:23:12 2011
@@ -5,6 +5,7 @@
 #include "net/base/dnsrr_resolver.h"
 
 #if defined(OS_POSIX)
+#include <netinet/in.h>
 #include <resolv.h>
 #endif
 
@@ -187,7 +188,11 @@ class RRResolverWorker {
     bool r = true;
 #if defined(OS_MACOSX) || defined(OS_OPENBSD)
     if ((_res.options & RES_INIT) == 0) {
+#if defined(OS_OPENBSD)
+      if (res_init() != 0)
+#else
       if (res_ninit(&_res) != 0)
+#endif
         r = false;
     }
 #else
