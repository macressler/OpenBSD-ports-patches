$OpenBSD: patch-third_party_libvpx_libvpx_gyp,v 1.5 2011/10/27 07:59:09 robert Exp $
--- third_party/libvpx/libvpx.gyp.orig	Fri Oct 21 10:49:37 2011
+++ third_party/libvpx/libvpx.gyp	Wed Oct 26 14:06:30 2011
@@ -77,7 +77,7 @@
       'source/libvpx/vpx_scale/generic/yv12extend.c',
     ],
     'conditions': [
-      ['OS=="mac" or OS=="linux"', {
+      ['os_posix==1', {
         'asm_obj_extension': 'o',
       }],
       ['OS=="win"', {
@@ -86,7 +86,7 @@
     ],
   },
   'conditions': [
-    [ '(OS=="linux" or OS=="mac" or OS=="win") and target_arch!="arm"', {
+    [ '((os_posix==1 and OS!="android") or OS=="win") and target_arch!="arm"', {
       'targets': [
         {
           # This libvpx target contains both encoder and decoder.
@@ -122,6 +122,22 @@
                   '-I', 'source/libvpx',
                 ],
               }],
+              [ 'OS=="openbsd" and target_arch=="ia32"', {
+                'yasm_flags': [
+                  '-felf32',
+                  '-m', 'x86',
+                  '-I', 'source/config/openbsd/ia32',
+                  '-I', 'source/libvpx',
+                ],
+              }],
+              [ 'OS=="openbsd" and target_arch=="x64"', {
+                'yasm_flags': [
+                  '-felf64',
+                  '-m', 'amd64',
+                  '-I', 'source/config/openbsd/x64',
+                  '-I', 'source/libvpx',
+                ],
+              }],
               [ 'OS=="win" and target_arch=="ia32"', {
                 'yasm_flags': [
                   '-DPREFIX',
@@ -490,6 +506,16 @@
         ['OS=="mac"', {
           'variables': {
             'libvpx_path': 'lib/mac/ia32',
+          },
+        }],
+        ['OS=="openbsd" and target_arch=="ia32"', {
+          'variables': {
+            'libvpx_path': 'lib/openbsd/ia32',
+          },
+        }],
+        ['OS=="openbsd" and target_arch=="x64"', {
+          'variables': {
+            'libvpx_path': 'lib/openbsd/x64',
           },
         }],
       ],
