$OpenBSD: patch-chrome_browser_browser_process_impl_cc,v 1.3 2014/01/18 11:42:03 robert Exp $
--- chrome/browser/browser_process_impl.cc.orig.port	Mon Jan 13 22:00:18 2014
+++ chrome/browser/browser_process_impl.cc	Thu Jan 16 12:26:42 2014
@@ -108,7 +108,7 @@
 #include "ui/aura/env.h"
 #endif
 
-#if !defined(OS_ANDROID) && !defined(OS_IOS)
+#if !defined(OS_ANDROID) && !defined(OS_IOS) && !defined(OS_BSD)
 #include "chrome/browser/media_galleries/media_file_system_registry.h"
 #endif
 
@@ -255,7 +255,7 @@ void BrowserProcessImpl::StartTearDown() {
 
   ExtensionRendererState::GetInstance()->Shutdown();
 
-#if !defined(OS_ANDROID) && !defined(OS_IOS)
+#if !defined(OS_ANDROID) && !defined(OS_IOS) && !defined(OS_BSD)
   media_file_system_registry_.reset();
   // Delete |storage_monitor_| now. Otherwise the FILE thread would be gone
   // when we try to release it in the dtor and Valgrind would report a
@@ -635,7 +635,7 @@ BookmarkPromptController* BrowserProcessImpl::bookmark
 }
 
 StorageMonitor* BrowserProcessImpl::storage_monitor() {
-#if defined(OS_ANDROID) || defined(OS_IOS)
+#if defined(OS_ANDROID) || defined(OS_IOS) || defined(OS_BSD)
   return NULL;
 #else
   return storage_monitor_.get();
@@ -644,13 +644,13 @@ StorageMonitor* BrowserProcessImpl::storage_monitor() 
 
 void BrowserProcessImpl::set_storage_monitor_for_test(
     scoped_ptr<StorageMonitor> monitor) {
-#if !defined(OS_ANDROID) && !defined(OS_IOS)
+#if !defined(OS_ANDROID) && !defined(OS_IOS) && !defined(OS_BSD)
   storage_monitor_ = monitor.Pass();
 #endif
 }
 
 MediaFileSystemRegistry* BrowserProcessImpl::media_file_system_registry() {
-#if defined(OS_ANDROID) || defined(OS_IOS)
+#if defined(OS_ANDROID) || defined(OS_IOS) || defined(OS_BSD)
     return NULL;
 #else
   if (!media_file_system_registry_)
@@ -952,7 +952,7 @@ void BrowserProcessImpl::PreMainMessageLoopRun() {
   }
 #endif
 
-#if !defined(OS_ANDROID) && !defined(OS_IOS)
+#if !defined(OS_ANDROID) && !defined(OS_IOS) && !defined(OS_BSD)
   storage_monitor_.reset(StorageMonitor::Create());
 #endif
 
