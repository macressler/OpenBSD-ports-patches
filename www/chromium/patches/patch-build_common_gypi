$OpenBSD: patch-build_common_gypi,v 1.20 2014/01/18 11:42:03 robert Exp $
--- build/common.gypi.orig.port	Thu Jan 16 12:28:43 2014
+++ build/common.gypi	Thu Jan 16 12:49:12 2014
@@ -223,7 +223,7 @@
       'image_loader_extension%': 0,
 
       # Python version.
-      'python_ver%': '2.6',
+      'python_ver%': '2.7',
 
       # Set NEON compilation flags.
       'arm_neon%': 1,
@@ -709,7 +709,7 @@
         # NOTE: The check for disable_nacl==0 and component=="static_library"
         # can't be used here because these variables are not defined yet, but it
         # is still not supported.
-        ['OS!="mac" and OS!="ios" and OS!="android" and chromeos==0', {
+        ['OS!="mac" and OS!="ios" and OS!="android" and chromeos==0 and OS!="openbsd"', {
           'test_isolation_mode%': 'check',
         }, {
           'test_isolation_mode%': 'noop',
@@ -1187,7 +1187,7 @@
       }],
       ['os_posix==1 and OS!="mac" and OS!="ios"', {
         # Figure out the python architecture to decide if we build pyauto.
-        'python_arch%': '<!(<(DEPTH)/build/linux/python_arch.sh <(sysroot)/usr/<(system_libdir)/libpython<(python_ver).so.1.0)',
+        'python_arch%': '<!(<(DEPTH)/build/linux/python_arch.sh <(sysroot)/usr/local/<(system_libdir)/libpython<(python_ver).so.0.0)',
         'conditions': [
           ['target_arch=="mipsel"', {
             'werror%': '',
@@ -2810,6 +2810,14 @@
         ],
       },
     }],
+    ['OS=="openbsd"', {
+      'target_defaults': {
+        'cflags': [
+          '-fno-stack-protector',
+          '-Wno-unknown-warning-option',
+        ],
+      },
+    }],
     ['os_posix==1 and OS!="mac" and OS!="ios"', {
       'target_defaults': {
         # Enable -Werror by default, but put it in a variable so it can
@@ -3234,7 +3242,7 @@
               # Clang considers the `register` keyword as deprecated, but e.g.
               # code generated by flex (used in angle) contains that keyword.
               # http://crbug.com/255186
-              '-Wno-deprecated-register',
+              # '-Wno-deprecated-register',
 
               # This warns about auto_ptr<>, used in third-party code.
               '-Wno-deprecated-declarations',
@@ -4590,15 +4598,15 @@
         ['OS=="android"', {
           # Android could use the goma with clang.
           'make_global_settings': [
-            ['CC', '<!(/bin/echo -n ${ANDROID_GOMA_WRAPPER} ${CHROME_SRC}/<(make_clang_dir)/bin/clang)'],
-            ['CXX', '<!(/bin/echo -n ${ANDROID_GOMA_WRAPPER} ${CHROME_SRC}/<(make_clang_dir)/bin/clang++)'],
+            ['CC', '/usr/local/bin/clang'],
+            ['CXX', '/usr/local/bin/clang++'],
             ['CC.host', '$(CC)'],
             ['CXX.host', '$(CXX)'],
           ],
         }, {
           'make_global_settings': [
-            ['CC', '<(make_clang_dir)/bin/clang'],
-            ['CXX', '<(make_clang_dir)/bin/clang++'],
+            ['CC', '/usr/local/bin/clang'],
+            ['CXX', '/usr/local/bin/clang++'],
             ['CC.host', '$(CC)'],
             ['CXX.host', '$(CXX)'],
           ],
