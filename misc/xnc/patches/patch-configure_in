$OpenBSD: patch-configure_in,v 1.3 2012/12/11 21:09:18 naddy Exp $
--- configure.in.orig	Wed Mar 27 16:59:52 2002
+++ configure.in	Tue Dec 11 21:29:28 2012
@@ -198,21 +198,7 @@ AC_CHECK_LIB(jpeg, jpeg_read_scanlines,
  need_jpeg="yes"
 ])
 
-AC_CHECK_LIB(tiff, TIFFGetField,
-[
-  out_lib="$out_lib -ltiff"
-  echo "TLIB=-ltiff" >> make.conf
-  echo "TIFFDEFINE=-DLOAD_TIF" >>make.conf
-  echo "TIFFINC=" >> make.conf
-  tiff="TIFF"
-],
-[
-  echo "TLIB=" >> make.conf
-  echo "TIFFDEFINE=" >>make.conf
-  echo "TIFFINC=" >> make.conf
-])
 
-
 AC_CHECK_LIB(z, inflate,
 [
  echo "ZINC=" >>make.conf
@@ -227,6 +213,21 @@ AC_CHECK_LIB(z, inflate,
 ])
 
 
+AC_CHECK_LIB(tiff, TIFFGetField,
+[
+  out_lib="$out_lib -ltiff -ljpeg"
+  echo "TLIB=-ltiff -ljpeg" >> make.conf
+  echo "TIFFDEFINE=-DLOAD_TIF" >>make.conf
+  echo "TIFFINC=" >> make.conf
+  tiff="TIFF"
+],
+[
+  echo "TLIB=" >> make.conf
+  echo "TIFFDEFINE=" >>make.conf
+  echo "TIFFINC=" >> make.conf
+], -ljpeg -lz)
+
+
 AC_CHECK_LIB(png, png_get_valid,
 [
  echo "PNGDEFINE=-DLOAD_PNG" >>make.conf
@@ -267,6 +268,7 @@ dnl ---------------------- Checks for library function
 AC_PROG_GCC_TRADITIONAL
 AC_FUNC_MEMCMP
 AC_TYPE_SIGNAL
+AC_CHECK_LIB(util, openpty)
 AC_CHECK_FUNCS( getcwd \
 		mkdir \
 		putenv \
