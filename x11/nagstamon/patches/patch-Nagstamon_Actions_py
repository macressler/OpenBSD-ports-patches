$OpenBSD: patch-Nagstamon_Actions_py,v 1.1 2013/07/08 09:10:38 ajacoutot Exp $

Fix a security issue in the update-checking mechanism (upstream).

--- Nagstamon/Actions.py.orig	Tue Mar 27 15:05:22 2012
+++ Nagstamon/Actions.py	Mon Jul  8 11:06:26 2013
@@ -402,8 +402,10 @@ class CheckForNewVersion(threading.Thread):
             if s.CheckingForNewVersion == False:
                 # set the flag to lock that connection
                 s.CheckingForNewVersion = True
+                # use IFW server to speed up request and secure via https
+                result = s.FetchURL("https://nagstamon.ifw-dresden.de/files-nagstamon/latest_version_" +\
+                                     self.output.version, giveback="raw", no_auth=True)
                 # remove newline
-                result = s.FetchURL("http://nagstamon.sourceforge.net/latest_version_" + self.output.version, giveback="raw")
                 version, error = result.result.split("\n")[0], result.error
                 
                 # debug
