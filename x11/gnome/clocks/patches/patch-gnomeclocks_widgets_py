$OpenBSD: patch-gnomeclocks_widgets_py,v 1.1.1.1 2012/09/30 13:50:26 ajacoutot Exp $

From 6241e753000f30fbb3799373d5ccc692c595553c Mon Sep 17 00:00:00 2001
From: Paolo Borelli <pborelli@gnome.org>
Date: Thu, 27 Sep 2012 20:14:07 +0000
Subject: Try to prevent clutter from interfering with key events

--- gnomeclocks/widgets.py.orig	Mon Sep 10 19:08:23 2012
+++ gnomeclocks/widgets.py	Sun Sep 30 12:22:14 2012
@@ -354,6 +354,13 @@ class Embed(GtkClutter.Embed):
         GtkClutter.Embed.__init__(self)
         self.set_use_layout_size(True)
 
+        # Set can-focus to false and override key-press and
+        # key-release so that we skip all Clutter key event
+        # handling and we let the contained gtk widget do
+        # their thing
+        # See https://bugzilla.gnome.org/show_bug.cgi?id=684988
+        self.set_can_focus(False)
+
         self.stage = self.get_stage()
 
         self._overlayLayout = Clutter.BinLayout()
@@ -399,6 +406,12 @@ class Embed(GtkClutter.Embed):
                              Clutter.BinAlignment.FILL,
                              Clutter.BinAlignment.FILL)
         self._background.lower_bottom()
+
+    def do_key_press_event(self, event):
+        return False
+
+    def do_key_release_event(self, event):
+        return False
 
     def _spotlight_finished(self, actor, name, is_finished):
         self._viewActor.set_child_below_sibling(self._background, None)
