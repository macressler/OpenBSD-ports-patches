$OpenBSD: patch-src_client_c,v 1.5 2014/01/03 16:02:20 ajacoutot Exp $

From d52fe59fb0fadc33dcb16fbdcb4a568ec72eae94 Mon Sep 17 00:00:00 2001
From: Ryan Lortie <desrt@desrt.ca>
Date: Mon, 09 Dec 2013 17:20:40 +0000
Subject: Use g_get_current_dir()

--- src/client.c.orig	Mon Nov 11 21:36:27 2013
+++ src/client.c	Fri Jan  3 16:56:12 2014
@@ -514,17 +514,8 @@ parse_arguments (int *argcp,
   }
   g_option_context_free (context);
 
-  if (data->working_directory == NULL) {
-    char *cwd;
-
-    /* We use get_current_dir_name() here instead of getcwd / g_get_current_dir()
-     * because we want to use the value from PWD (if it is correct).
-     * See bug 502146.
-     */
-    cwd = get_current_dir_name ();
-    data->working_directory = g_strdup (cwd);
-    free (cwd);
-  }
+  if (data->working_directory == NULL)
+    data->working_directory = g_get_current_dir ();
 
   /* Do this here so that gdk_display is initialized */
   if (data->startup_id == NULL)
