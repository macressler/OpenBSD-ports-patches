$OpenBSD: patch-src_prefsdialog_cpp,v 1.2 2013/12/09 10:46:32 ajacoutot Exp $

From d5584bb655e4ba9dd38b340f29812a5b9159c01c Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@gnome.org>
Date: Mon, 09 Dec 2013 08:44:17 +0000
Subject: preferences: don't display the selinux column if it's not enabled/supported

--- src/prefsdialog.cpp.orig	Mon Dec  9 09:35:51 2013
+++ src/prefsdialog.cpp	Mon Dec  9 09:31:37 2013
@@ -9,6 +9,7 @@
 
 #include "cgroups.h"
 #include "proctable.h"
+#include "selinux.h"
 #include "settings-keys.h"
 #include "util.h"
 
@@ -182,6 +183,8 @@ create_field_page(GtkBuilder* builder, GtkWidget *tree
 
         column_id = gtk_tree_view_column_get_sort_column_id(column);
         if ((column_id == COL_CGROUP) && (!cgroups_enabled()))
+            continue;
+        if ((column_id == COL_SECURITYCONTEXT) && (!can_show_security_context_column ()))
             continue;
 
         if ((column_id == COL_UNIT ||
