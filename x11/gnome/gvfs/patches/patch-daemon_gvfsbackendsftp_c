$OpenBSD: patch-daemon_gvfsbackendsftp_c,v 1.5 2013/12/21 13:21:49 ajacoutot Exp $

From 15601b4f10f30eaeab2a33006ef00e9f0888da7c Mon Sep 17 00:00:00 2001
From: Ross Lagerwall <rosslagerwall@gmail.com>
Date: Thu, 07 Nov 2013 10:11:40 +0000
Subject: sftp: Fix handling of multiple reads of the packet length

--- daemon/gvfsbackendsftp.c.orig	Fri Nov  8 14:23:39 2013
+++ daemon/gvfsbackendsftp.c	Sat Dec 21 14:12:18 2013
@@ -1242,7 +1242,7 @@ read_reply_async_got_len  (GObject *source_object,
   if (backend->reply_size_read < 4)
     {
       g_input_stream_read_async (backend->reply_stream,
-				 &backend->reply_size + backend->reply_size_read, 4 - backend->reply_size_read,
+				 (char *)&backend->reply_size + backend->reply_size_read, 4 - backend->reply_size_read,
 				 0, backend->reply_stream_cancellable, read_reply_async_got_len,
 				 backend);
       return;
