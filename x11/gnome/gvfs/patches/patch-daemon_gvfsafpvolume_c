$OpenBSD: patch-daemon_gvfsafpvolume_c,v 1.3 2014/01/23 08:36:02 ajacoutot Exp $

From 20bb9205b25ab07864f3733205e420508b2102a6 Mon Sep 17 00:00:00 2001
From: Ross Lagerwall <rosslagerwall@gmail.com>
Date: Thu, 19 Dec 2013 13:53:24 +0000
Subject: afp: Don't crash when opening the root directory

--- daemon/gvfsafpvolume.c.orig	Thu Nov  7 16:12:17 2013
+++ daemon/gvfsafpvolume.c	Thu Jan 23 09:30:41 2014
@@ -460,14 +460,6 @@ g_vfs_afp_volume_open_fork (GVfsAfpVolume      *volume
   g_return_if_fail (G_VFS_IS_AFP_VOLUME (volume));
 
   priv = volume->priv;
-  
-  if (is_root (filename))
-  {
-    g_simple_async_report_error_in_idle (G_OBJECT (volume), callback,
-                                         user_data, G_IO_ERROR, G_IO_ERROR_IS_DIRECTORY,
-                                         _("File is directory"));
-    return;
-  }
 
   comm = g_vfs_afp_command_new (AFP_COMMAND_OPEN_FORK);
   /* data fork */
