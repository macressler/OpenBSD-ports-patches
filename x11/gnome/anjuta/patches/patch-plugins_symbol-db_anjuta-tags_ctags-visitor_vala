$OpenBSD: patch-plugins_symbol-db_anjuta-tags_ctags-visitor_vala,v 1.3 2013/05/14 07:23:43 jasper Exp $

From 8d179e29235fba369b41552043d60292e540f432 Mon Sep 17 00:00:00 2001
From: SÃ©bastien Granjoux <seb.sfo@free.fr>
Date: Sun, 12 May 2013 08:46:23 +0000
Subject: bgo #698158: anjuta-3.8.1 fails to build with vala-0.20

--- plugins/symbol-db/anjuta-tags/ctags-visitor.vala.orig	Wed Sep 26 22:53:47 2012
+++ plugins/symbol-db/anjuta-tags/ctags-visitor.vala	Tue May 14 09:10:11 2013
@@ -157,11 +157,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_class (Class cl) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = cl.source_reference.begin.line;
-#else
-		entry.line_number = cl.source_reference.first_line;
-#endif
 		entry.name = cl.name;
 		entry.kind_name = "class";
 		entry.kind = 'c';
@@ -176,11 +172,7 @@ public class CTagsVisitor : CodeVisitor {
 	}
 	public override void visit_struct (Struct st) {
 		var entry = CTagsEntry();
-#if VALA_0_18
 		entry.line_number = st.source_reference.begin.line;
-#else
-		entry.line_number = st.source_reference.first_line;
-#endif
 		entry.name = st.name;
 		entry.kind_name = "struct";
 		entry.kind = 's';
@@ -194,11 +186,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_interface (Interface iface) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = iface.source_reference.begin.line;
-#else
-		entry.line_number = iface.source_reference.first_line;
-#endif
 		entry.name = iface.name;
 		entry.kind_name = "interface";
 		entry.kind = 'i';
@@ -214,11 +202,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_enum (Vala.Enum en) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = en.source_reference.begin.line;
-#else
-		entry.line_number = en.source_reference.first_line;
-#endif
 		entry.name = en.name;
 		entry.kind_name = "enum";
 		entry.kind = 'e';
@@ -232,11 +216,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_error_domain (ErrorDomain edomain) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = edomain.source_reference.begin.line;
-#else
-		entry.line_number = edomain.source_reference.first_line;
-#endif
 		entry.name = edomain.name;
 		entry.kind_name = "errordomain";
 		entry.kind = 'E';
@@ -251,11 +231,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_enum_value (Vala.EnumValue ev) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = ev.source_reference.begin.line;
-#else
-		entry.line_number = ev.source_reference.first_line;
-#endif
 		entry.name = ev.name;
 		entry.kind_name = "enumvalue";
 		entry.kind = 'v';
@@ -268,11 +244,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_error_code (ErrorCode ecode) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		//entry.line_number = ecode.source_reference.begin.line;
-#else
-		//entry.line_number = ecode.source_reference.first_line;
-#endif
 		entry.name = ecode.name;
 		entry.kind_name = "errorcode";
 		entry.kind = 'r';
@@ -286,11 +258,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_delegate (Delegate d) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = d.source_reference.begin.line;
-#else
-		entry.line_number = d.source_reference.first_line;
-#endif
 		entry.name = d.name;
 		entry.kind_name = "delegate";
 		entry.kind = 'd';
@@ -305,11 +273,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_signal (Vala.Signal sig) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = sig.source_reference.begin.line;
-#else
-		entry.line_number = sig.source_reference.first_line;
-#endif
 		entry.name = sig.name;
 		entry.kind_name = "signal";
 		entry.kind = 'S';
@@ -325,11 +289,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_field (Field f) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = f.source_reference.begin.line;
-#else
-		entry.line_number = f.source_reference.first_line;
-#endif
 		entry.name = f.name;
 		entry.kind_name = "field";
 		entry.kind = 'f';
@@ -343,11 +303,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_constant (Constant c) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = c.source_reference.begin.line;
-#else
-		entry.line_number = c.source_reference.first_line;
-#endif
 		entry.name = c.name;
 		entry.kind_name = "field";
 		entry.kind = 'f';
@@ -361,11 +317,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_property (Property prop) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = prop.source_reference.begin.line;
-#else
-		entry.line_number = prop.source_reference.first_line;
-#endif
 		entry.name = prop.name;
 		entry.kind_name = "property";
 		entry.kind = 'p';
@@ -381,11 +333,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_method (Method m) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = m.source_reference.begin.line;
-#else
-		entry.line_number = m.source_reference.first_line;
-#endif
 		entry.name = m.name;
 		entry.kind_name = "method";
 		entry.kind = 'm';
@@ -402,11 +350,7 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_local_variable (LocalVariable local) {
 		var entry = CTagsEntry();
 
-#if VALA_0_18
 		entry.line_number = local.source_reference.begin.line;
-#else
-		entry.line_number = local.source_reference.first_line;
-#endif
 		entry.name = local.name;
 		entry.kind_name = "local";
 		entry.kind = 'l';
