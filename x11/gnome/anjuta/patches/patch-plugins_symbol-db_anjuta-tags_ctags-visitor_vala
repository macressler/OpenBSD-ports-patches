$OpenBSD: patch-plugins_symbol-db_anjuta-tags_ctags-visitor_vala,v 1.1 2012/08/29 14:11:55 jasper Exp $

From cc60d728285312f41e2b7fbe969bdf4f5729843f Mon Sep 17 00:00:00 2001
From: Ryan Lortie <desrt@desrt.ca>
Date: Fri, 22 Jun 2012 05:34:15 +0000
Subject: ctags vala support: update to Vala 0.18

--- plugins/symbol-db/anjuta-tags/ctags-visitor.vala.orig	Sat Jul 28 11:35:54 2012
+++ plugins/symbol-db/anjuta-tags/ctags-visitor.vala	Wed Aug 29 09:07:18 2012
@@ -157,7 +157,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_class (Class cl) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = cl.source_reference.begin.line;
+#else
 		entry.line_number = cl.source_reference.first_line;
+#endif
 		entry.name = cl.name;
 		entry.kind_name = "class";
 		entry.kind = 'c';
@@ -172,7 +176,11 @@ public class CTagsVisitor : CodeVisitor {
 	}
 	public override void visit_struct (Struct st) {
 		var entry = CTagsEntry();
+#if VALA_0_18
+		entry.line_number = st.source_reference.begin.line;
+#else
 		entry.line_number = st.source_reference.first_line;
+#endif
 		entry.name = st.name;
 		entry.kind_name = "struct";
 		entry.kind = 's';
@@ -186,7 +194,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_interface (Interface iface) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = iface.source_reference.begin.line;
+#else
 		entry.line_number = iface.source_reference.first_line;
+#endif
 		entry.name = iface.name;
 		entry.kind_name = "interface";
 		entry.kind = 'i';
@@ -202,7 +214,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_enum (Vala.Enum en) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = en.source_reference.begin.line;
+#else
 		entry.line_number = en.source_reference.first_line;
+#endif
 		entry.name = en.name;
 		entry.kind_name = "enum";
 		entry.kind = 'e';
@@ -216,7 +232,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_error_domain (ErrorDomain edomain) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = edomain.source_reference.begin.line;
+#else
 		entry.line_number = edomain.source_reference.first_line;
+#endif
 		entry.name = edomain.name;
 		entry.kind_name = "errordomain";
 		entry.kind = 'E';
@@ -231,7 +251,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_enum_value (Vala.EnumValue ev) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = ev.source_reference.begin.line;
+#else
 		entry.line_number = ev.source_reference.first_line;
+#endif
 		entry.name = ev.name;
 		entry.kind_name = "enumvalue";
 		entry.kind = 'v';
@@ -244,7 +268,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_error_code (ErrorCode ecode) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		//entry.line_number = ecode.source_reference.begin.line;
+#else
 		//entry.line_number = ecode.source_reference.first_line;
+#endif
 		entry.name = ecode.name;
 		entry.kind_name = "errorcode";
 		entry.kind = 'r';
@@ -258,7 +286,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_delegate (Delegate d) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = d.source_reference.begin.line;
+#else
 		entry.line_number = d.source_reference.first_line;
+#endif
 		entry.name = d.name;
 		entry.kind_name = "delegate";
 		entry.kind = 'd';
@@ -273,7 +305,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_signal (Vala.Signal sig) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = sig.source_reference.begin.line;
+#else
 		entry.line_number = sig.source_reference.first_line;
+#endif
 		entry.name = sig.name;
 		entry.kind_name = "signal";
 		entry.kind = 'S';
@@ -289,7 +325,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_field (Field f) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = f.source_reference.begin.line;
+#else
 		entry.line_number = f.source_reference.first_line;
+#endif
 		entry.name = f.name;
 		entry.kind_name = "field";
 		entry.kind = 'f';
@@ -303,7 +343,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_constant (Constant c) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = c.source_reference.begin.line;
+#else
 		entry.line_number = c.source_reference.first_line;
+#endif
 		entry.name = c.name;
 		entry.kind_name = "field";
 		entry.kind = 'f';
@@ -317,7 +361,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_property (Property prop) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = prop.source_reference.begin.line;
+#else
 		entry.line_number = prop.source_reference.first_line;
+#endif
 		entry.name = prop.name;
 		entry.kind_name = "property";
 		entry.kind = 'p';
@@ -333,7 +381,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_method (Method m) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = m.source_reference.begin.line;
+#else
 		entry.line_number = m.source_reference.first_line;
+#endif
 		entry.name = m.name;
 		entry.kind_name = "method";
 		entry.kind = 'm';
@@ -350,7 +402,11 @@ public class CTagsVisitor : CodeVisitor {
 	public override void visit_local_variable (LocalVariable local) {
 		var entry = CTagsEntry();
 
+#if VALA_0_18
+		entry.line_number = local.source_reference.begin.line;
+#else
 		entry.line_number = local.source_reference.first_line;
+#endif
 		entry.name = local.name;
 		entry.kind_name = "local";
 		entry.kind = 'l';
