$OpenBSD: patch-js_ui_panel_js,v 1.6 2013/04/17 11:04:28 jasper Exp $

Make Network Manager support optional.
https://bugzilla.gnome.org/show_bug.cgi?id=679871

--- js/ui/panel.js.orig	Tue Apr 16 20:52:38 2013
+++ js/ui/panel.js	Wed Apr 17 12:27:44 2013
@@ -904,11 +904,13 @@ if (Config.HAVE_BLUETOOTH)
     PANEL_ITEM_IMPLEMENTATIONS['bluetooth'] =
         imports.ui.status.bluetooth.Indicator;
 
-try {
-    PANEL_ITEM_IMPLEMENTATIONS['network'] =
-        imports.ui.status.network.NMApplet;
-} catch(e) {
-    log('NMApplet is not supported. It is possible that your NetworkManager version is too old');
+if (Config.HAVE_NETWORK_MANAGER) {
+    try {
+        PANEL_ITEM_IMPLEMENTATIONS['network'] =
+            imports.ui.status.network.NMApplet;
+    } catch(e) {
+        log('NMApplet is not supported. It is possible that your NetworkManager version is too old');
+    }
 }
 
 const Panel = new Lang.Class({
