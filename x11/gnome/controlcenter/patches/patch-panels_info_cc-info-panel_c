$OpenBSD: patch-panels_info_cc-info-panel_c,v 1.5 2012/02/16 22:25:47 ajacoutot Exp $

From dc7abc26c06329d07cba7da4cdcce9c7d251dd81 Mon Sep 17 00:00:00 2001
From: Bastien Nocera <hadess@hadess.net>
Date: Mon, 30 Jan 2012 11:16:54 +0000
Subject: info: Remove unnecessary and non-portable include

No PackageKit on OpenBSD.

--- panels/info/cc-info-panel.c.orig	Tue Nov  8 21:20:01 2011
+++ panels/info/cc-info-panel.c	Mon Jan 30 12:38:21 2012
@@ -23,7 +23,6 @@
 
 #include "cc-info-panel.h"
 
-#include <sys/vfs.h>
 #include <polkit/polkit.h>
 
 #include <glib.h>
@@ -1282,6 +1281,7 @@ on_pk_get_updates_ready (GObject      *source,
                          GAsyncResult *res,
                          CcInfoPanel  *self)
 {
+#ifndef __OpenBSD__
   GError     *error;
   GVariant   *result;
 
@@ -1293,6 +1293,9 @@ on_pk_get_updates_ready (GObject      *source,
       g_error_free (error);
       return;
     }
+#else
+  return;
+#endif
 }
 
 static void
@@ -1300,6 +1303,7 @@ on_pk_get_tid_ready (GObject      *source,
                      GAsyncResult *res,
                      CcInfoPanel  *self)
 {
+#ifndef __OpenBSD__
   GError     *error;
   GVariant   *result;
   char       *tid;
@@ -1346,6 +1350,9 @@ on_pk_get_tid_ready (GObject      *source,
                      NULL,
                      (GAsyncReadyCallback) on_pk_get_updates_ready,
                      self);
+#else
+  return;
+#endif
 }
 
 static void
@@ -1408,6 +1415,7 @@ cc_info_panel_init (CcInfoPanel *self)
 
   g_assert (self->priv->session_bus);
 
+#ifndef __OpenBSD__
   self->priv->pk_proxy = g_dbus_proxy_new_for_bus_sync (G_BUS_TYPE_SYSTEM,
                                                         G_DBUS_PROXY_FLAGS_NONE,
                                                         NULL,
@@ -1429,6 +1437,7 @@ cc_info_panel_init (CcInfoPanel *self)
                         self);
       refresh_updates (self);
     }
+#endif
 
   gtk_builder_add_from_file (self->priv->builder,
                              GNOMECC_UI_DIR "/info.ui",
@@ -1443,8 +1452,10 @@ cc_info_panel_init (CcInfoPanel *self)
 
   self->priv->graphics_data = get_graphics_data ();
 
+#ifndef __OpenBSD__
   widget = WID ("updates_button");
   g_signal_connect (widget, "clicked", G_CALLBACK (on_updates_button_clicked), self);
+#endif
 
   info_panel_setup_selector (self);
   info_panel_setup_overview (self);
