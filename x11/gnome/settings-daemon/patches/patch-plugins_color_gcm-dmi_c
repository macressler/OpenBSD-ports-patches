$OpenBSD: patch-plugins_color_gcm-dmi_c,v 1.3 2011/12/16 11:26:34 ajacoutot Exp $

From 52b9ea0cf11aa72b8251fa11e99cc58054b9c81c Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@openbsd.org>
Date: Fri, 16 Dec 2011 09:27:47 +0000
Subject: color plugin: prevent sysfs warning on !linux

--- plugins/color/gcm-dmi.c.orig	Fri Dec 16 09:45:32 2011
+++ plugins/color/gcm-dmi.c	Fri Dec 16 10:01:37 2011
@@ -122,6 +122,7 @@ gcm_dmi_class_init (GcmDmiClass *klass)
 static void
 gcm_dmi_init (GcmDmi *dmi)
 {
+#if defined(__linux__)
         const gchar *sysfs_name[] = {
                 "/sys/class/dmi/id/product_name",
                 "/sys/class/dmi/id/board_name",
@@ -136,6 +137,12 @@ gcm_dmi_init (GcmDmi *dmi)
                 "/sys/class/dmi/id/chassis_vendor",
                 "/sys/class/dmi/id/board_vendor",
                 NULL};
+#else
+#warning Please add dmi support for your OS
+        const gchar *sysfs_name[] = { NULL };
+        const gchar *sysfs_version[] = { NULL };
+        const gchar *sysfs_vendor[] = { NULL };
+#endif
 
         dmi->priv = GCM_DMI_GET_PRIVATE (dmi);
 
