$OpenBSD: patch-src_x_c,v 1.11 2012/12/27 19:58:05 dcoppa Exp $

Bugfix: draw right tab border for split containers
(upstream git commit ae605bdd394bdf83a8015ac626b222fd40e35b04)

OpenBSD lacks POSIX shared memory support (shm_open() and friends)

--- src/x.c.orig	Wed Dec 12 00:08:17 2012
+++ src/x.c	Thu Dec 27 15:19:49 2012
@@ -505,7 +505,7 @@ void x_draw_decoration(Con *con) {
                 con->deco_rect.width - 2);
         free(title);
 
-        goto copy_pixmaps;
+        goto after_title;
     }
 
     if (win->name == NULL)
@@ -533,6 +533,7 @@ void x_draw_decoration(Con *con) {
             con->deco_rect.x + 2 + indent_px, con->deco_rect.y + text_offset_y,
             con->deco_rect.width - 2 - indent_px);
 
+after_title:
     /* Since we donâ€™t clip the text at all, it might in some cases be painted
      * on the border pixels on the right side of a window. Therefore, we draw
      * the right border again after rendering the text (and the unconnected
@@ -1057,8 +1058,10 @@ void x_set_i3_atoms(void) {
     xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A_I3_PID, XCB_ATOM_CARDINAL, 32, 1, &pid);
     xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A_I3_CONFIG_PATH, A_UTF8_STRING, 8,
                         strlen(current_configpath), current_configpath);
+#if !defined(__OpenBSD__)
     xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A_I3_SHMLOG_PATH, A_UTF8_STRING, 8,
                         strlen(shmlogname), shmlogname);
+#endif
 }
 
 /*
