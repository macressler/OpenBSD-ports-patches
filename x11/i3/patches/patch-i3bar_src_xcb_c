$OpenBSD: patch-i3bar_src_xcb_c,v 1.10 2013/05/17 10:21:42 dcoppa Exp $

commit 72c279bc39953c04ddee1d8934a488388b30c3b4
Author: Michael Stapelberg <michael@stapelberg.de>
Date:   Sun Apr 14 22:54:15 2013 +0200

Bugfix: fix crash when not having tray_output configured

--- i3bar/src/xcb.c.orig	Mon Mar 18 22:43:36 2013
+++ i3bar/src/xcb.c	Fri May 17 11:36:13 2013
@@ -505,7 +505,9 @@ static void handle_client_message(xcb_client_message_e
             }
             /* In case of tray_output == primary and there is no primary output
              * configured, we fall back to the first available output. */
-            if (output == NULL && strcasecmp("primary", config.tray_output) == 0) {
+            if (output == NULL &&
+                config.tray_output &&
+                strcasecmp("primary", config.tray_output) == 0) {
                 SLIST_FOREACH(walk, outputs, slist) {
                     if (!walk->active)
                         continue;
