$OpenBSD: patch-src_tree_c,v 1.3 2012/02/21 14:05:39 dcoppa Exp $

Bugfix: properly split when the current container is alone within
a stacked/tabbed container
(upstream git commit 0fc459892e381469a8b967c3895c33eda6c87b48)

--- src/tree.c.orig	Tue Feb 21 14:11:04 2012
+++ src/tree.c	Tue Feb 21 14:11:49 2012
@@ -291,7 +291,8 @@ void tree_split(Con *con, orientation_t orientation) {
     /* if we are in a container whose parent contains only one
      * child (its split functionality is unused so far), we just change the
      * orientation (more intuitive than splitting again) */
-    if (con_num_children(parent) == 1) {
+    if (con_num_children(parent) == 1 &&
+        parent->layout == L_DEFAULT) {
         parent->orientation = orientation;
         DLOG("Just changing orientation of existing container\n");
         return;
