$OpenBSD: patch-gtk_gtkmountoperation-x11_c,v 1.10 2012/07/09 17:21:27 ajacoutot Exp $

From 974212ec825d8d50bdea8ab955b6f19b8ed1672f Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@gnome.org>
Date: Mon, 09 Jul 2012 16:20:34 +0000
Subject: OpenBSD: use G_N_ELEMENTS instead of nitems

--- gtk/gtkmountoperation-x11.c.orig	Sun Mar 18 21:44:21 2012
+++ gtk/gtkmountoperation-x11.c	Mon Jul  9 18:07:49 2012
@@ -731,11 +731,11 @@ pid_get_parent (GPid pid)
   int mib[] = { CTL_KERN, KERN_PROC, KERN_PROC_PID, pid,
                 sizeof(struct kinfo_proc), 0 };
 
-  if (sysctl(mib, nitems(mib), NULL, &len, NULL, 0) == -1)
+  if (sysctl(mib, G_N_ELEMENTS (mib), NULL, &len, NULL, 0) == -1)
       return (-1);
   mib[5] = (len / sizeof(struct kinfo_proc));
 
-  if (sysctl(mib, nitems(mib), &kp, &len, NULL, 0) < 0)
+  if (sysctl(mib, G_N_ELEMENTS (mib), &kp, &len, NULL, 0) < 0)
       return -1;
 
   ppid = kp.p_ppid;
@@ -760,7 +760,7 @@ pid_get_env (GPid pid, const gchar *key)
   key_len = strlen (key);
 
   ret = NULL;
-  if (sysctl(mib, nitems(mib), strs, &len, NULL, 0) != -1)
+  if (sysctl(mib, G_N_ELEMENTS (mib), strs, &len, NULL, 0) != -1)
     {
       for (i = 0; strs[i] != NULL; i++)
 	{
@@ -792,7 +792,7 @@ pid_get_command_line (GPid pid)
 
   strs = (char **)realloc(strs, len);
 
-  if (sysctl(mib, nitems(mib), strs, &len, NULL, 0) == -1) {
+  if (sysctl(mib, G_N_ELEMENTS (mib), strs, &len, NULL, 0) == -1) {
     g_free (strs);
     return ret;
   }
