$OpenBSD: patch-src_sidebar_Tree_vala,v 1.1 2012/08/29 14:11:55 jasper Exp $

Makes a minor modification to allow compilation by Vala 0.17.2; closes #5453.
http://redmine.yorba.org/projects/shotwell/repository/revisions/35f856338c65ce13878098c40cd913fcb453a5c4

--- src/sidebar/Tree.vala.orig	Tue Aug 28 10:38:38 2012
+++ src/sidebar/Tree.vala	Tue Aug 28 10:39:41 2012
@@ -548,9 +548,10 @@ public class Sidebar.Tree : Gtk.TreeView {
         
         if (only_children)
             return;
+
+	Gtk.TreeIter iter = wrapper.get_iter();
+	store.remove(ref iter);
         
-        store.remove(wrapper.get_iter());
-        
         if (selected_wrapper == wrapper)
             selected_wrapper = null;
         
@@ -641,7 +642,8 @@ public class Sidebar.Tree : Gtk.TreeView {
         bool selected = (get_current_path().compare(wrapper.get_path()) == 0);
         
         // remove from current position in tree
-        store.remove(wrapper.get_iter());
+	Gtk.TreeIter iter = wrapper.get_iter();
+	store.remove(ref iter);
         
         Sidebar.Entry? parent = branch.get_parent(entry);
         assert(parent != null);
