$OpenBSD: patch-source_shared_lib_CMakeLists_txt,v 1.1.1.1 2013/01/28 13:58:49 stsp Exp $
--- source/shared_lib/CMakeLists.txt.orig	Wed Nov 14 20:20:08 2012
+++ source/shared_lib/CMakeLists.txt	Wed Jan  9 17:48:38 2013
@@ -101,13 +101,13 @@ IF(BUILD_MEGAGLEST_MODEL_VIEWER OR BUILD_MEGAGLEST_MAP
 		SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${OPENAL_LIBRARY})
 	ENDIF()
 
-	# FIND_PACKAGE(OGG REQUIRED)
-	# INCLUDE_DIRECTORIES(${OGG_INCLUDE_DIR})
-	# IF(UNIX)
-		# SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${OGG_LIBRARY})
-		# SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${VORBIS_LIBRARY})
-		# SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${VORBIS_FILE_LIBRARY})
-	# ENDIF()
+	FIND_PACKAGE(OGG REQUIRED)
+	INCLUDE_DIRECTORIES(${OGG_INCLUDE_DIR})
+	IF(UNIX)
+		SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${OGG_LIBRARY})
+		SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${VORBIS_LIBRARY})
+		SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${VORBIS_FILE_LIBRARY})
+	ENDIF()
 
 
 #	FIND_PACKAGE(LUAJIT)
@@ -123,7 +123,7 @@ IF(BUILD_MEGAGLEST_MODEL_VIEWER OR BUILD_MEGAGLEST_MAP
 #
         FIND_PACKAGE(LUA REQUIRED)
         INCLUDE_DIRECTORIES(${LUA_INCLUDE_DIR})
-        IF(UNIX)
+        IF(Linux OR APPLE)
 	        SET(EXTERNAL_LIBS ${EXTERNAL_LIBS} ${LUA_LIBRARIES} "libdl.so")
         ENDIF()
 #        ENDIF()
@@ -341,6 +341,7 @@ IF(BUILD_MEGAGLEST_MODEL_VIEWER OR BUILD_MEGAGLEST_MAP
 
         set(CMAKE_REQUIRED_INCLUDES "${IRCCLIENT_INCLUDE_DIR}")
         set(CMAKE_REQUIRED_LIBRARIES "${IRCCLIENT_LIBRARY}")
+        set(CMAKE_REQUIRED_FLAGS "-I${LOCALBASE}/include -L${LOCALBASE}/lib -lpthread")
         include(CheckCXXSourceRuns)
 
         check_cxx_source_runs("
