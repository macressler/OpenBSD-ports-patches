$OpenBSD: patch-src_CMakeLists_txt,v 1.1.1.1 2013/03/13 15:49:53 bcallah Exp $
--- src/CMakeLists.txt.orig	Thu Jan 31 20:05:26 2013
+++ src/CMakeLists.txt	Sat Mar  9 11:29:53 2013
@@ -37,8 +37,8 @@ SET(FLAGS "${FLAGS} -DPKG_DATADIR=\\\"${PKG_DATADIR}/\
 SET(FLAGS "${FLAGS} -DLOCALEDIR=\\\"${LOCALEDIR}/\\\"")
 SET(FLAGS "${FLAGS} -DPKG_NAME=\\\"${PKG_NAME}/\\\"")
 
-IF (DEBUG_MENU)
-    SET(FLAGS "${FLAGS} -DDEBUG_MENU")
+IF (DEBUG_FEATURES)
+    SET(FLAGS "${FLAGS} -DDEBUG_FEATURES")
 ENDIF()
 
 IF (CMAKE_BUILD_TYPE)
@@ -61,6 +61,10 @@ IF (WIN32)
     FIND_PACKAGE(LibIntl REQUIRED)
 ELSEIF (CMAKE_SYSTEM_NAME STREQUAL "Darwin" OR BEOS OR CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
     FIND_PACKAGE(LibIntl REQUIRED)
+ELSEIF (CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+    FIND_PACKAGE(LibIntl REQUIRED)
+    FIND_PACKAGE(Ogg REQUIRED)
+    FIND_PACKAGE(Vorbis REQUIRED)
 ELSEIF (CMAKE_SYSTEM_NAME STREQUAL SunOS)
     # explicit linking to libintl is required on Solaris
     SET(EXTRA_LIBRARIES intl)
@@ -466,20 +470,40 @@ ELSE()
     ADD_EXECUTABLE(valyriatear WIN32 ${SRCS} ${SRCS_COMMON} ${SRCS_LUABIND})
 ENDIF()
 
-TARGET_LINK_LIBRARIES(valyriatear
-    ${INTERNAL_LIBRARIES}
-    ${SDL_LIBRARY}
-    ${SDLTTF_LIBRARY}
-    ${SDLIMAGE_LIBRARY}
-    ${OPENGL_LIBRARIES}
-    ${OPENAL_LIBRARY}
-    ${VORBISFILE_LIBRARIES}
-    ${PNG_LIBRARIES}
-    ${JPEG_LIBRARIES}
-    ${LUA_LIBRARIES}
-    ${X11_LIBRARIES}
-    ${LIBINTL_LIBRARIES}
-    ${EXTRA_LIBRARIES})
+# Vorbis, vorbisfile and ogg are explcitely needed on OpenBSD
+IF (CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+    TARGET_LINK_LIBRARIES(valyriatear
+        ${INTERNAL_LIBRARIES}
+        ${SDL_LIBRARY}
+        ${SDLTTF_LIBRARY}
+        ${SDLIMAGE_LIBRARY}
+        ${OPENGL_LIBRARIES}
+        ${OPENAL_LIBRARY}
+	${VORBISFILE_LIBRARIES}
+        ${OGG_LIBRARY}
+        ${VORBIS_LIBRARIES}
+        ${PNG_LIBRARIES}
+        ${JPEG_LIBRARIES}
+        ${LUA_LIBRARIES}
+        ${X11_LIBRARIES}
+        ${LIBINTL_LIBRARIES}
+        ${EXTRA_LIBRARIES})
+ELSE()
+    TARGET_LINK_LIBRARIES(valyriatear
+        ${INTERNAL_LIBRARIES}
+        ${SDL_LIBRARY}
+        ${SDLTTF_LIBRARY}
+        ${SDLIMAGE_LIBRARY}
+        ${OPENGL_LIBRARIES}
+        ${OPENAL_LIBRARY}
+        ${VORBISFILE_LIBRARIES}
+        ${PNG_LIBRARIES}
+        ${JPEG_LIBRARIES}
+        ${LUA_LIBRARIES}
+        ${X11_LIBRARIES}
+        ${LIBINTL_LIBRARIES}
+        ${EXTRA_LIBRARIES})
+ENDIF()
 
 INSTALL(TARGETS valyriatear RUNTIME DESTINATION ${PKG_BINDIR})
 
