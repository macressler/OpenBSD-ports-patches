$OpenBSD: patch-lib_puppet_type_resources_rb,v 1.4 2014/05/15 20:17:16 jasper Exp $

From 535e748d2f0c102d0b5041988480e2ef237cd10f Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@humppa.nl>
Date: Thu, 17 Apr 2014 17:12:36 +0200
Subject: [PATCH] User ID's below 1000, not 500, are generally considered system users on OpenBSD.

--- lib/puppet/type/resources.rb.orig	Thu May 15 01:10:29 2014
+++ lib/puppet/type/resources.rb	Thu May 15 21:07:14 2014
@@ -49,7 +49,11 @@ Puppet::Type.newtype(:resources) do
       when /^\d+/
         Integer(value)
       when :true, true
-        500
+        if Facter.value('operatingsystem') != 'OpenBSD'
+          500
+        else
+          1000
+        end
       when :false, false
         false
       when Integer; value
@@ -60,7 +64,11 @@ Puppet::Type.newtype(:resources) do
 
     defaultto {
       if @resource[:name] == "user"
-        500
+        if Facter.value('operatingsystem') != 'OpenBSD'
+          500
+        else
+          1000
+        end
       else
         nil
       end
