$OpenBSD: patch-lib_puppet_provider_mount_rb,v 1.2 2013/12/12 21:12:38 jasper Exp $

From 87b7299ab42f8714661b419d10cb48a45c226def Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@humppa.nl>
Date: Wed, 13 Nov 2013 15:58:41 +0100
Subject: [PATCH] On systems without "-o remount", use "-o update" except for AIX.

--- lib/puppet/provider/mount.rb.orig	Thu Dec 12 10:06:05 2013
+++ lib/puppet/provider/mount.rb	Thu Dec 12 10:07:41 2013
@@ -27,6 +27,13 @@ module Puppet::Provider::Mount
     info "Remounting"
     if resource[:remounts] == :true
       mountcmd "-o", "remount", resource[:name]
+    elsif ["FreeBSD", "DragonFly", "OpenBSD"].include?(Facter.value(:operatingsystem))
+      if self.options && !self.options.empty?
+        options = self.options + ",update"
+      else
+        options = "update"
+      end
+      mountcmd "-o", options, resource[:name]
     else
       unmount
       mount
