$OpenBSD: patch-src_rpc_virnetsocket_c,v 1.5 2013/04/03 06:37:10 jasper Exp $

Use sockpeercred on OpenBSD.

--- src/rpc/virnetsocket.c.orig	Thu Mar 21 08:42:49 2013
+++ src/rpc/virnetsocket.c	Tue Apr  2 23:02:13 2013
@@ -1105,7 +1105,11 @@ int virNetSocketGetUNIXIdentity(virNetSocketPtr sock,
                                 gid_t *gid,
                                 pid_t *pid)
 {
+#if defined (__OpenBSD__)
+    struct sockpeercred cr;
+#else
     struct ucred cr;
+#endif
     socklen_t cr_len = sizeof(cr);
     virObjectLock(sock);
 
