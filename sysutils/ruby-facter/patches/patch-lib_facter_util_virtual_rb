$OpenBSD: patch-lib_facter_util_virtual_rb,v 1.2 2013/04/26 12:15:55 robert Exp $
--- lib/facter/util/virtual.rb.orig	Mon Apr 15 20:13:14 2013
+++ lib/facter/util/virtual.rb	Fri Apr 26 14:04:32 2013
@@ -26,6 +26,10 @@ module Facter::Util::Virtual
   # lspci is a delegating helper method intended to make it easier to stub the
   # system call without affecting other calls to Facter::Util::Resolution.exec
   def self.lspci(command = "lspci 2>/dev/null")
+    if Facter.value(:kernel) == "OpenBSD"
+      command = "pcidump 2>/dev/null"
+    end
+
     Facter::Util::Resolution.exec command
   end
 
