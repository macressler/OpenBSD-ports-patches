$OpenBSD: patch-cups_Makefile,v 1.10 2013/07/12 07:19:38 ajacoutot Exp $
--- cups/Makefile.orig	Fri Jun  7 03:12:52 2013
+++ cups/Makefile	Fri Jul 12 07:35:41 2013
@@ -248,10 +248,6 @@ install-libs: $(INSTALLSTATIC)
 	echo Installing libraries in $(LIBDIR)...
 	$(INSTALL_DIR) -m 755 $(LIBDIR)
 	$(INSTALL_LIB) $(LIBCUPS) $(LIBDIR)
-	if test $(LIBCUPS) = "libcups.so.2" -o $(LIBCUPS) = "libcups.sl.2"; then \
-		$(RM) $(LIBDIR)/`basename $(LIBCUPS) .2`; \
-		$(LN) $(LIBCUPS) $(LIBDIR)/`basename $(LIBCUPS) .2`; \
-	fi
 	if test $(LIBCUPS) = "libcups.2.dylib"; then \
 		$(RM) $(LIBDIR)/libcups.dylib; \
 		$(LN) $(LIBCUPS) $(LIBDIR)/libcups.dylib; \
@@ -280,7 +276,7 @@ uninstall:
 	$(RM) $(LIBDIR)/libcups.sl
 	$(RM) $(LIBDIR)/libcups.sl.2
 	$(RM) $(LIBDIR)/libcups.so
-	$(RM) $(LIBDIR)/libcups.so.2
+	$(RM) $(LIBDIR)/libcups.so.${LIBcups_VERSION}
 	-$(RMDIR) $(LIBDIR)
 	for file in $(HEADERS); do \
 		$(RM) $(INCLUDEDIR)/cups/$$file; \
@@ -289,15 +285,13 @@ uninstall:
 
 
 #
-# libcups.so.2, libcups.sl.2
+# libcups.so.${LIBcups_VERSION}, libcups.sl.2
 #
 
-libcups.so.2 libcups.sl.2:	$(LIBOBJS)
+libcups.so.${LIBcups_VERSION} libcups.sl.2:	$(LIBOBJS)
 	echo Linking $@...
 	$(DSO) $(ARCHFLAGS) $(DSOFLAGS) -o $@ $(LIBOBJS) $(LIBGSSAPI) \
 		$(SSLLIBS) $(DNSSDLIBS) $(COMMONLIBS) $(LIBZ)
-	$(RM) `basename $@ .2`
-	$(LN) $@ `basename $@ .2`
 
 
 #
