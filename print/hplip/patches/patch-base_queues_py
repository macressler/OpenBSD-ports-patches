$OpenBSD: patch-base_queues_py,v 1.2 2013/03/08 06:51:46 ajacoutot Exp $
--- base/queues.py.orig	Wed Feb 13 17:38:51 2013
+++ base/queues.py	Fri Feb 22 15:16:08 2013
@@ -66,7 +66,7 @@ class DetectedDevice:
 
 ##### METHODS #####
 
-# Checks 'lp' group is added o not
+# Checks '_cups' group is added o not
 def check_user_groups():
     result = False
     sts,output = utils.run('groups')
@@ -78,21 +78,21 @@ def check_user_groups():
         grp_list= output.split(' ')
         cnt = 0
         while cnt < len(grp_list) :
-            if grp_list[cnt] == 'lp':
+            if grp_list[cnt] == '_cups':
                 result = True
                 break
             cnt += 1
 
     return result
 
-# This function adds the groups ('lp') to user
+# This function adds the groups ('_cups') to user
 def add_group(core, mode, passwordObj):
     result = False
     add_user_to_group = core.get_distro_ver_data('add_user_to_group', '')
     if add_user_to_group:
         usermod = os.path.join(utils.which("usermod"), "usermod") + " %s %s" % (add_user_to_group, prop.username)
     else:
-        usermod = os.path.join(utils.which("usermod"), "usermod") + " %s -a %s" % ("-Glp", prop.username)
+        usermod = os.path.join(utils.which("usermod"), "usermod") + " %s -a %s" % ("-G _cups", prop.username)
 
     if passwordObj == None:
         passwordObj = password.Password(mode)
@@ -100,7 +100,7 @@ def add_group(core, mode, passwordObj):
     cmd =passwordObj.getAuthCmd() % usermod
     log.info("cmd = %s" %cmd)
 
-    pswd_msg = "Enter root/superuser password to add 'lp' group"
+    pswd_msg = "Enter root/superuser password to add '_cups' group"
     sts, output = utils.run(cmd, passwordObj, pswd_msg)
     if sts == 0:
         result = True
@@ -355,7 +355,7 @@ def main_function(passwordObj = None, mode = GUI_MODE,
             core.init()
             if add_group(core, mode, passwordObj) is False:
                 Error_Found = True
-                log.error("Failed to add lp group to user[%s]. Manually add 'lp' group to usergroups. And reboot system."%prop.username)
+                log.error("Failed to add _cups group to user[%s]. Manually add '_cups' group to usergroups. And reboot system."%prop.username)
             else:
                 log.info("Groups added successfully and reboot is required. Please reboot system to take effect.")
         mapofDevices = parseQueues(mode)
@@ -406,7 +406,7 @@ def main_function(passwordObj = None, mode = GUI_MODE,
             core.init()
             if add_group(core, mode, passwordObj) is False:
                 Error_Found = True
-                dialog.showMessage("User must be part of 'lp' group.\nManually add 'lp' group to '%s' user. " %prop.username)
+                dialog.showMessage("User must be part of '_cups' group.\nManually add '_cups' group to '%s' user. " %prop.username)
             else:
                 dialog.showSuccessMessage("Groups added successfully and reboot is required. Please reboot system to take effect.")
 
