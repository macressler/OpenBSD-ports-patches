$OpenBSD: patch-encfs_DirNode_cpp,v 1.1.1.1 2014/01/17 10:10:58 stsp Exp $
--- encfs/DirNode.cpp.orig	Thu Jan 16 17:43:57 2014
+++ encfs/DirNode.cpp	Thu Jan 16 17:44:33 2014
@@ -805,6 +805,22 @@ DirNode::openNode( const char *plainName, const char *
 	return shared_ptr<FileNode>();
 }
 
+shared_ptr<FileNode>
+DirNode::openNode( const char *plainName, const char * requestor, int flags,
+	mode_t mode, int *result )
+{
+    (void)requestor;
+    rAssert( result != NULL );
+    Lock _lock( mutex );
+
+    shared_ptr<FileNode> node = findOrCreate( plainName );
+
+    if( node && (*result = node->open( flags, mode )) >= 0 )
+	return node;
+    else
+	return shared_ptr<FileNode>();
+}
+
 int DirNode::unlink( const char *plaintextName )
 {
     string cyName = naming->encodePath( plaintextName );
