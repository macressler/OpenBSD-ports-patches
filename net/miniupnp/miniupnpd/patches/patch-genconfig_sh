$OpenBSD: patch-genconfig_sh,v 1.2 2012/01/20 07:07:23 ajacoutot Exp $
--- genconfig.sh.orig	Mon Jul 25 18:06:27 2011
+++ genconfig.sh	Fri Jan 20 08:04:38 2012
@@ -67,6 +67,10 @@ case $OS_NAME in
 		if [ \( $MAJORVER -ge 5 \) -o \( $MAJORVER -eq 4 -a $MINORVER -ge 7 \) ]; then
 			echo "#define PF_NEWSTYLE" >> ${CONFIGFILE}
 		fi
+		# onrdomain was introduced in OpenBSD 5.0
+		if [ $MAJORVER -ge 5 ]; then
+			echo "#define PFRULE_HAS_ONRDOMAIN" >> ${CONFIGFILE}
+		fi
 		echo "#define USE_PF 1" >> ${CONFIGFILE}
 		FW=pf
 		echo "#define USE_IFACEWATCHER 1" >> ${CONFIGFILE}
