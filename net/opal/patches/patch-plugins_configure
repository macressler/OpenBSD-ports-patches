$OpenBSD: patch-plugins_configure,v 1.5 2011/10/26 16:59:34 ajacoutot Exp $
--- plugins/configure.orig	Fri Oct 14 09:00:00 2011
+++ plugins/configure	Mon Oct 24 18:35:23 2011
@@ -6479,7 +6479,7 @@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
 
         *)
           CFLAGS="$CFLAGS -fPIC"
-          LDSO='-shared -Wl,-soname,$(SONAME)'
+          LDSO='-shared -fPIC -Wl,-soname,$(SONAME)'
           PLUGINEXT=so
           for ac_header in sys/time.h sys/file.h netinet/in.h
 do :
@@ -6973,7 +6973,7 @@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-            #include <gsm/gsm.h>
+            #include <gsm.h>
 
 int
 main ()
@@ -6999,7 +6999,7 @@ fi
 $as_echo "$opal_gsm" >&6; }
 
             if test "x${opal_gsm}" = "xyes" ; then
-              GSM_CFLAGS="-I/usr/include/gsm -I/usr/local/include/gsm"
+              GSM_CFLAGS="-I!!LOCALBASE!!/include"
               GSM_LIBS="-lgsm"
             fi
 
@@ -7080,7 +7080,7 @@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-            #include <gsm/gsm.h>
+            #include <gsm.h>
 
 int
 main ()
@@ -7106,7 +7106,7 @@ fi
 $as_echo "$opal_gsm" >&6; }
 
             if test "x${opal_gsm}" = "xyes" ; then
-              GSM_CFLAGS="-I/usr/include/gsm -I/usr/local/include/gsm"
+              GSM_CFLAGS="-I!!LOCALBASE!!/include"
               GSM_LIBS="-lgsm"
             fi
 
