$OpenBSD: patch-src_settings_c,v 1.1 2012/04/16 13:09:26 dcoppa Exp $

Add option to enable TLS for all actions (not just sending login
credentials). Useful to get around GeoIP restrictions.
(upstream git commit 35763dea799c96361e288a10eab0fbd16c36e880)

--- src/settings.c.orig	Tue Mar 20 14:47:07 2012
+++ src/settings.c	Mon Apr 16 14:57:08 2012
@@ -121,6 +121,7 @@ void BarSettingsRead (BarSettings_t *settings) {
 		#endif
 	#endif
 	settings->autoselect = true;
+	settings->forceTls = false;
 	settings->history = 5;
 	settings->volume = 0;
 	settings->sortOrder = BAR_SORT_NAME_AZ;
@@ -245,6 +246,8 @@ void BarSettingsRead (BarSettings_t *settings) {
 			settings->fifo = strdup (val);
 		} else if (streq ("autoselect", key)) {
 			settings->autoselect = atoi (val);
+		} else if (streq ("force_tls", key)) {
+			settings->forceTls = atoi (val);
 		} else if (streq ("tls_fingerprint", key)) {
 			/* expects 40 byte hex-encoded sha1 */
 			if (strlen (val) == 40) {
