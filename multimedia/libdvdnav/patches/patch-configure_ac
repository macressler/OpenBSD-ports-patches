$OpenBSD: patch-configure_ac,v 1.4 2012/05/03 06:50:37 ajacoutot Exp $
--- configure.ac.orig	Fri Oct  7 16:20:59 2011
+++ configure.ac	Thu Dec 15 13:32:10 2011
@@ -143,6 +143,11 @@ case $host in
     THREAD_CFLAGS="-I/usr/local/include -D_THREAD_SAFE"
     CFLAGS="$THREAD_CFLAGS $CFLAGS"
     ;;
+  *-*-openbsd*)
+    THREAD_LIBS="-pthread"
+    THREAD_CFLAGS="-pthread"
+    CFLAGS="$CFLAGS $THREAD_CFLAGS"
+    ;;
   *mingw32* | *cygwin*)
     ;;
   *)
@@ -201,7 +206,7 @@ dnl ---------------------------------------------
 dnl cflags
 dnl ---------------------------------------------
 dnl Common cflags for all platforms
-CFLAGS="-O3 -Wall -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE $CFLAGS"
+CFLAGS="-Wall -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE $CFLAGS"
 DEBUG_CFLAGS="-g -DDEBUG $CFLAGS"
 
 AC_SUBST(DEBUG_CFLAGS)
