$OpenBSD: patch-ext_dom_node_c,v 1.1 2013/04/14 23:22:11 sthen Exp $

fix with libxml 2.9, adapted from
https://mail.gnome.org/archives/xml/2012-August/msg00028.html

--- ext/dom/node.c.orig.port	Sun Apr 14 13:14:20 2013
+++ ext/dom/node.c	Sun Apr 14 13:28:46 2013
@@ -1950,9 +1950,9 @@ static void dom_canonicalization(INTERNAL_FUNCTION_PAR
         RETVAL_FALSE;
     } else {
 		if (mode == 0) {
-			ret = buf->buffer->use;
+			ret = xmlOutputBufferGetSize(buf); 
 			if (ret > 0) {
-				RETVAL_STRINGL((char *) buf->buffer->content, ret, 1);
+				RETVAL_STRINGL((char *) xmlOutputBufferGetContent(buf), ret, 1);
 			} else {
 				RETVAL_EMPTY_STRING();
 			}
