$OpenBSD: patch-Rakefile,v 1.3 2013/12/15 11:29:22 jasper Exp $

- Change various configuration variables to what they would be like when
  PuppetDB has been _installed_, as these variables are used in other scripts.
  The installer has been modified in tasks/install.rake
- Set OpenBSD's Ruby site dir.

--- Rakefile.orig	Sun Dec 15 11:51:56 2013
+++ Rakefile	Sun Dec 15 11:52:45 2013
@@ -54,13 +54,13 @@ if @pe
     @pe_version = ENV['PE_VER'] || '3.0'
     @java_bin = "/opt/puppet/bin/java"
 else
-    @install_dir = "/usr/share/puppetdb"
-    @etc_dir = "/etc/puppetdb"
-    @config_dir = "/etc/puppetdb/conf.d"
-    @lib_dir = "/var/lib/puppetdb"
-    @link = "/usr/share/puppetdb"
+    @install_dir = "share/puppetdb"
+    @etc_dir = "${SYSCONFDIR}/puppetdb"
+    @config_dir = "${SYSCONFDIR}/puppetdb/conf.d"
+    @lib_dir = "/var/db/puppetdb"
+    @link = "share/puppetdb"
     @name = "puppetdb"
-    @sbin_dir = "/usr/sbin"
+    @sbin_dir = "sbin"
 end
 
 @initscriptname = "/etc/init.d/#{@name}"
@@ -86,7 +86,7 @@ case @osfamily
   when /suse/
     @plibdir = @pe ? PE_SITELIBDIR : (%x(ruby -rrbconfig -e "puts RbConfig::CONFIG['sitelibdir']").chomp)
   when /openbsd/
-    @plibdir = @pe ? PE_SITELIBDIR : '/usr/local/lib/ruby/site_ruby/1.9.1'
+    @plibdir = @pe ? PE_SITELIBDIR : '${MODRUBY_SITEDIR}'
 end
 
 @heap_dump_path = "#{@log_dir}/puppetdb-oom.hprof"
